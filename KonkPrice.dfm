inherited KonkPriceForm: TKonkPriceForm
  Left = 231
  Top = 116
  Width = 597
  Height = 475
  Caption = #1042#1074#1086#1076' '#1094#1077#1085' '#1082#1086#1085#1082#1091#1088#1077#1085#1090#1086#1074
  OldCreateOrder = True
  Position = poScreenCenter
  OnActivate = FormActivate
  OnClose = FormClose
  OnCreate = FormCreate
  PixelsPerInch = 96
  TextHeight = 13
  object pnlBottom: TPanel
    Left = 0
    Top = 408
    Width = 589
    Height = 40
    Align = alBottom
    BevelInner = bvRaised
    BevelOuter = bvLowered
    TabOrder = 0
    OnDblClick = pnlBottomDblClick
    DesignSize = (
      589
      40)
    object sbPrint: TRxSpeedButton
      Left = 8
      Top = 8
      Width = 45
      Height = 25
      Hint = #1055#1077#1095#1072#1090#1100' '#1089#1086#1087#1091#1090#1089#1090#1074#1091#1102#1097#1080#1093' '#1076#1086#1082#1091#1084#1077#1085#1090#1086#1074
      Glyph.Data = {
        E6040000424DE604000000000000360000002800000014000000140000000100
        180000000000B004000000000000000000000000000000000000C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000000000
        000000000000000000000000000000000000000000000000000000C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000C6C6C6C6C6C6C6C6C6C6
        C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6000000C6C6C6000000C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C00000000000000000000000000000000000000000
        00000000000000000000000000000000000000C6C6C6000000C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0000000C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C600FFFF
        00FFFF00FFFFC6C6C6C6C6C6000000000000000000C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0000000C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C684848484848484
        8484C6C6C6C6C6C6000000C6C6C6000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        0000000000000000000000000000000000000000000000000000000000000000
        00000000000000C6C6C6C6C6C6000000C0C0C0C0C0C0C0C0C0C0C0C0000000C6
        C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6C6000000
        C6C6C6000000C6C6C6000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C00000000000
        00000000000000000000000000000000000000000000000000C6C6C6000000C6
        C6C6000000000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000FFFFFF
        FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000C6C6C6000000C6C6
        C6000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000FFFFFF00
        0000000000000000000000000000FFFFFF000000000000000000000000C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000FFFFFFFFFFFFFFFF
        FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000FFFFFF000000000000
        000000000000000000FFFFFF000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0000000FFFFFFFFFFFFFFFFFFFFFFFFFF
        FFFFFFFFFFFFFFFFFFFFFF000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C00000000000000000000000000000000000
        00000000000000000000C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
        C0C0C0C0C0C0C0C0C0C0}
      OnClick = sbPrintClick
    end
    object btnChangePriceDensity: TRxSpeedButton
      Left = 56
      Top = 8
      Width = 137
      Height = 25
      Hint = #1055#1077#1095#1072#1090#1100' '#1089#1086#1087#1091#1090#1089#1090#1074#1091#1102#1097#1080#1093' '#1076#1086#1082#1091#1084#1077#1085#1090#1086#1074
      Caption = #1055#1086#1082#1072#1079#1072#1090#1100' '#1087#1083#1086#1090#1085#1086#1089#1090#1080
      OnClick = btnChangePriceDensityClick
    end
    object bbOk: TBitBtn
      Left = 396
      Top = 8
      Width = 95
      Height = 25
      Anchors = [akTop, akRight]
      Caption = '&'#1057#1086#1093#1088#1072#1085#1080#1090#1100
      Default = True
      TabOrder = 0
      OnClick = bbOkClick
      Glyph.Data = {
        DE010000424DDE01000000000000760000002800000024000000120000000100
        0400000000006801000000000000000000001000000010000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
        3333333333333333333333330000333333333333333333333333F33333333333
        00003333344333333333333333388F3333333333000033334224333333333333
        338338F3333333330000333422224333333333333833338F3333333300003342
        222224333333333383333338F3333333000034222A22224333333338F338F333
        8F33333300003222A3A2224333333338F3838F338F33333300003A2A333A2224
        33333338F83338F338F33333000033A33333A222433333338333338F338F3333
        0000333333333A222433333333333338F338F33300003333333333A222433333
        333333338F338F33000033333333333A222433333333333338F338F300003333
        33333333A222433333333333338F338F00003333333333333A22433333333333
        3338F38F000033333333333333A223333333333333338F830000333333333333
        333A333333333333333338330000333333333333333333333333333333333333
        0000}
      NumGlyphs = 2
    end
    object bbCancel: TBitBtn
      Left = 494
      Top = 8
      Width = 88
      Height = 25
      Anchors = [akTop, akRight]
      Caption = '&'#1047#1072#1082#1088#1099#1090#1100
      TabOrder = 1
      OnClick = bbCancelClick
      Kind = bkCancel
    end
  end
  object Panel1: TPanel
    Left = 0
    Top = 0
    Width = 589
    Height = 33
    Align = alTop
    BevelInner = bvRaised
    BevelOuter = bvLowered
    TabOrder = 1
    object Label1: TLabel
      Left = 8
      Top = 8
      Width = 26
      Height = 13
      Caption = #1044#1072#1090#1072
    end
    object Label2: TLabel
      Left = 180
      Top = 10
      Width = 3
      Height = 13
    end
    object Label3: TLabel
      Left = 215
      Top = 10
      Width = 128
      Height = 13
      Caption = #1062#1045#1053#1067' '#1047#1040' '#1051#1048#1058#1056' ('#1075#1088#1085')'
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'MS Sans Serif'
      Font.Style = [fsBold]
      ParentFont = False
    end
    object DateEdit1: TDateEdit
      Left = 44
      Top = 4
      Width = 89
      Height = 21
      NumGlyphs = 2
      TabOrder = 0
      OnChange = DateEdit1Change
    end
    object cbHereOnly: TCheckBox
      Left = 432
      Top = 8
      Width = 153
      Height = 17
      Caption = #1058#1086#1083#1100#1082#1086' '#1074#1074#1077#1076#1077#1085#1085#1099#1077' '#1079#1076#1077#1089#1100
      Checked = True
      State = cbChecked
      TabOrder = 1
      OnClick = cbHereOnlyClick
    end
  end
  object Panel2: TPanel
    Left = 0
    Top = 33
    Width = 589
    Height = 356
    Align = alClient
    BevelInner = bvRaised
    BevelOuter = bvLowered
    TabOrder = 2
    object grid: TDBGridEh
      Left = 2
      Top = 2
      Width = 585
      Height = 352
      Align = alClient
      AllowedOperations = [alopUpdateEh, alopDeleteEh]
      DataSource = ds
      FooterColor = clWindow
      FooterFont.Charset = DEFAULT_CHARSET
      FooterFont.Color = clWindowText
      FooterFont.Height = -11
      FooterFont.Name = 'MS Sans Serif'
      FooterFont.Style = []
      OptionsEh = [dghFixed3D, dghHighlightFocus, dghClearSelection, dghEnterAsTab]
      PopupMenu = PM1
      TabOrder = 0
      TitleFont.Charset = DEFAULT_CHARSET
      TitleFont.Color = clWindowText
      TitleFont.Height = -11
      TitleFont.Name = 'MS Sans Serif'
      TitleFont.Style = []
      OnGetCellParams = gridGetCellParams
      OnKeyPress = gridKeyPress
      OnMouseDown = gridMouseDown
      Columns = <
        item
          EditButtons = <>
          FieldName = 'NAME'
          Footers = <>
          ReadOnly = True
          Title.Alignment = taCenter
          Title.Caption = #1054#1088#1075#1072#1085#1080#1079#1072#1094#1080#1103
          Width = 151
        end
        item
          ButtonStyle = cbsEllipsis
          EditButtons = <>
          FieldName = 'DEP_NAME'
          Footers = <>
          ReadOnly = True
          Title.Caption = #1050#1086#1085#1082#1091#1088#1080#1088#1091#1102#1097#1077#1077' '#1087#1086#1076#1088#1072#1079#1076'.'
          Width = 136
          OnEditButtonClick = gridColumns1EditButtonClick
        end
        item
          EditButtons = <>
          FieldName = '1'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '2'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '3'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '4'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '5'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '6'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '7'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '8'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '9'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '10'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '11'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '12'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '13'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '14'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '15'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '16'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '17'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '18'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '19'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end
        item
          EditButtons = <>
          FieldName = '20'
          Footers = <>
          Title.Alignment = taCenter
          Width = 35
        end>
    end
  end
  object StatusBar: TStatusBar
    Left = 0
    Top = 389
    Width = 589
    Height = 19
    Panels = <
      item
        Width = 400
      end>
  end
  object mt: TMemoryTable
    AfterEdit = mtAfterEdit
    Left = 240
    Top = 81
    object mtNAME: TStringField
      FieldName = 'NAME'
      Size = 50
    end
    object mtDEP_NAME: TStringField
      FieldName = 'DEP_NAME'
      Size = 50
    end
    object mtField1: TFloatField
      DisplayLabel = '0.00'
      FieldName = '1'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField2: TFloatField
      DisplayLabel = '0.00'
      FieldName = '2'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField3: TFloatField
      DisplayLabel = '0.00'
      FieldName = '3'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField4: TFloatField
      DisplayLabel = '0.00'
      FieldName = '4'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField5: TFloatField
      DisplayLabel = '0.00'
      FieldName = '5'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField6: TFloatField
      DisplayLabel = '0.00'
      FieldName = '6'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField7: TFloatField
      DisplayLabel = '0.00'
      FieldName = '7'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField8: TFloatField
      DisplayLabel = '0.00'
      FieldName = '8'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField9: TFloatField
      DisplayLabel = '0.00'
      FieldName = '9'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField10: TFloatField
      DisplayLabel = '0.00'
      FieldName = '10'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField11: TFloatField
      DisplayLabel = '0.00'
      FieldName = '11'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField12: TFloatField
      DisplayLabel = '0.00'
      FieldName = '12'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField13: TFloatField
      DisplayLabel = '0.00'
      FieldName = '13'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField14: TFloatField
      DisplayLabel = '0.00'
      FieldName = '14'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField15: TFloatField
      DisplayLabel = '0.00'
      FieldName = '15'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField16: TFloatField
      DisplayLabel = '0.00'
      FieldName = '16'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField17: TFloatField
      DisplayLabel = '0.00'
      FieldName = '17'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField18: TFloatField
      DisplayLabel = '0.00'
      FieldName = '18'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField19: TFloatField
      DisplayLabel = '0.00'
      FieldName = '19'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtField20: TFloatField
      DisplayLabel = '0.00'
      FieldName = '20'
      DisplayFormat = '0.00'
      EditFormat = '0.00'
      Precision = 2
    end
    object mtORG_ID: TFloatField
      FieldName = 'ORG_ID'
    end
    object mtORG_INST: TFloatField
      FieldName = 'ORG_INST'
    end
    object mtTYPE: TStringField
      FieldName = 'TYPE'
      Size = 1
    end
    object mtINST: TFloatField
      FieldName = 'INST'
    end
    object mtINST_NAME: TStringField
      FieldName = 'INST_NAME'
      Size = 50
    end
    object mtDEP_ID: TFloatField
      FieldName = 'DEP_ID'
    end
    object mtDEP_ID_OLD: TFloatField
      FieldName = 'DEP_ID_OLD'
    end
  end
  object ds: TOraDataSource
    DataSet = mt
    OnDataChange = dsDataChange
    Left = 336
    Top = 81
  end
  object qNpNew: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,name'
      'from '
      '(select /*+MERGE(Q)*/ id,name,state,np_dop_group_id,ord'
      'from oil_np_dop_group nd,'
      '     (select distinct np_dop_group_id '
      '      from oil_konk_price'
      '      where state='#39'Y'#39' and date_=:date_'
      '            and (inst=:inst or :inst is null)) Q'
      'where super_group_id=1'
      '      and nd.id=Q.np_dop_group_id(+)'
      ')'
      'where state='#39'Y'#39' or np_dop_group_id is not null'
      'order by ord')
    FetchAll = True
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 48
    Top = 161
    ParamData = <
      item
        DataType = ftDateTime
        Name = 'date_'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end>
  end
  object qExists: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,state,price,density'
      'from oil_konk_price'
      'where date_=:date_'
      '      and org_id=:org_id'
      '      and org_inst=:org_inst'
      '      and np_dop_group_id=:np_dop_group_id'
      '      and inst=:inst')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 48
    Top = 281
    ParamData = <
      item
        DataType = ftDateTime
        Name = 'date_'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'org_id'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'org_inst'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'np_dop_group_id'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end>
  end
  object qData: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select *'
      'from '
      ''
      '(select /*+ORDERED USE_HASH(kp,oo,opar,ooi,odep,ndg,vri)*/'
      '      kp.id,kp.inst,ooi.name as inst_name,kp.real_inst,'
      '      kp.org_id,kp.org_inst,'
      
        '      decode(oo.org_type,8,'#39'     '#39',35,'#39'     '#39','#39#39')||oo.name as or' +
        'g_name,'
      
        '      opar.id as par_id,opar.inst as par_inst,opar.name as par_n' +
        'ame,'
      '      decode(oo.org_type,8,'#39'A'#39',35,'#39'A'#39','#39'P'#39') as AzsPpon,'
      '      odep.id as konk_dep_id,odep.name as konk_dep_name,'
      '      decode(kp.density,0,'#39'N'#39',null,'#39'N'#39','#39'Y'#39') as DensityNeeded,'
      '      np_dop_group_id,price,density,npg.ord'
      'from  (select kp.*,vri.real_inst,var.value as konk_diff_podr'
      '       from oil_konk_price kp,v_oil_real_inst vri,'
      '            (select nvl(value,'#39'N'#39') as value'
      
        '             from oil_var v,(select '#39'KONK_DIFF_PODR'#39' as name fro' +
        'm dual) Q'
      '             where v.name(+)=Q.name'
      '            ) var) kp,'
      
        '      v_org oo,v_org opar,v_org ooi,v_org odep,oil_np_dop_group ' +
        'npg'
      '      '
      'where kp.state='#39'Y'#39' and kp.np_dop_group_id=npg.id'
      '      and kp.org_id=oo.id and kp.org_inst=oo.inst'
      '      and kp.inst=ooi.id and ooi.id=ooi.inst'
      '      and decode(nvl(kp.dep_id,0),'
      '             0,decode(kp.inst,'
      
        '                  kp.real_inst,decode(kp.konk_diff_podr,'#39'Y'#39',null' +
        ',kp.inst),'
      '               kp.inst),'
      '             kp.dep_id )=odep.id(+) and odep.id(+)=odep.inst(+)'
      '      and oo.par=opar.id(+) and oo.par_inst=opar.inst(+)'
      '      and kp.date_=:date_'
      '      and (kp.inst=:inst or :inst is null)'
      '      '
      'UNION ALL'
      ''
      'select /*+ORDERED USE_HASH(odet,oo,opar,ool,odep)*/'
      
        '      to_number(null) as id,odet.real_inst as inst,to_char(null)' +
        ' as inst_name,odet.real_inst,'
      '      oo.id as org_id,oo.inst as org_inst,'
      
        '      decode(oo.org_type,8,'#39'     '#39',35,'#39'     '#39','#39#39')||oo.name as or' +
        'g_name,'
      
        '      opar.id as par_id,opar.inst as par_inst,opar.name as par_n' +
        'ame,'
      '      decode(oo.org_type,8,'#39'A'#39',35,'#39'A'#39','#39'P'#39') as AzsPpon,'
      
        '      decode(var1.value,'#39'Y'#39',ool.to_id,odet.real_inst) as konk_de' +
        'p_id,'
      
        '      decode(var1.value,'#39'Y'#39',odep.name,odet.real_name) as konk_de' +
        'p_name,'
      
        '      decode(instr(var.value,'#39','#39'||oo.org_type||'#39','#39'),0,'#39'N'#39','#39'Y'#39') a' +
        's DensityNeeded,'
      
        '      to_number(null) as np_dop_group_id,to_number(null) as pric' +
        'e,to_number(null) as density,'
      '      to_number(null) as ord'
      
        'from  (select odet.*,oo.name as real_name,vri.real_inst from oil' +
        '_org_det odet,v_oil_real_inst vri,v_org oo'
      '       where vri.real_inst=oo.id and oo.id=oo.inst) odet,'
      '       v_org oo,v_org opar,oil_org_link ool,v_org odep,'
      '      (select '#39','#39'||nvl(value,'#39'3,4'#39')||'#39','#39' as value'
      
        '       from oil_var v,(select '#39'KONK_DENSITY_ORG_TYPES'#39' as name f' +
        'rom dual) Q'
      '       where v.name(+)=Q.name'
      '      ) var,'
      '      (select nvl(value,'#39'N'#39') as value'
      
        '       from oil_var v,(select '#39'KONK_DIFF_PODR'#39' as name from dual' +
        ') Q'
      '       where v.name(+)=Q.name'
      '      ) var1'
      'where odet.org_id=oo.id and odet.inst=oo.inst'
      '      and odet.state='#39'Y'#39' and oo.state='#39'Y'#39
      '      and odet.konk_show='#39'Y'#39
      '      and ool.state(+)='#39'Y'#39' and ool.link_type_id(+)=2'
      '      and ool.inst(+)=odet.real_inst'
      
        '      and ool.from_id(+)=odet.org_id and ool.from_inst(+)=odet.i' +
        'nst'
      '      and oo.par=opar.id(+) and oo.par_inst=opar.inst(+)'
      '      and ool.to_id=odep.id(+) and ool.to_inst=odep.inst(+)'
      ')'
      
        'order by decode(org_id-org_inst,0,decode(AzsPpon,'#39'A'#39',par_name,or' +
        'g_name),konk_dep_name),-- razbivka po filialam'
      
        '         abs(sign(org_id-org_inst)),-- snachala nashi - potom ko' +
        'nkurenty'
      
        '         decode(AzsPpon,'#39'A'#39',par_name,org_name), -- po imeni podr' +
        'azdeleniya'
      
        '         decode(AzsPpon,'#39'A'#39',par_id,org_id), -- po kodu podrazdel' +
        'eniya'
      
        '         abs(sign(inst-real_inst)), -- snachala - s instom osnov' +
        'noy organizacii, potom - ostal'#39'nye'
      
        '         abs(sign(decode(AzsPpon,'#39'A'#39',par_id,org_id)-org_id)), --' +
        ' snachala podrazdeleniya, potov AZS'
      '         org_name,org_id, -- imya i kod organizacii'
      
        '         sign(nvl(id,0)) desc, -- snachala real'#39'nye dannye, poto' +
        'm - pustye zapisi iz 2-go podzaprosa'
      '         konk_dep_name, -- imya konkuriruyuschego podrazdeleniya'
      '         inst,ord')
    FetchAll = True
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 48
    Top = 217
    ParamData = <
      item
        DataType = ftDateTime
        Name = 'date_'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end>
    object qDataID: TFloatField
      FieldName = 'ID'
    end
    object qDataINST: TFloatField
      FieldName = 'INST'
    end
    object qDataINST_NAME: TStringField
      FieldName = 'INST_NAME'
      Size = 100
    end
    object qDataREAL_INST: TFloatField
      FieldName = 'REAL_INST'
    end
    object qDataORG_ID: TFloatField
      FieldName = 'ORG_ID'
    end
    object qDataORG_INST: TFloatField
      FieldName = 'ORG_INST'
    end
    object qDataORG_NAME: TStringField
      FieldName = 'ORG_NAME'
      Size = 100
    end
    object qDataPAR_INST: TFloatField
      FieldName = 'PAR_INST'
    end
    object qDataPAR_ID: TFloatField
      FieldName = 'PAR_ID'
    end
    object qDataPAR_NAME: TStringField
      FieldName = 'PAR_NAME'
      Size = 100
    end
    object qDataAZSPPON: TStringField
      FieldName = 'AZSPPON'
      Size = 1
    end
    object qDataKONK_DEP_ID: TFloatField
      FieldName = 'KONK_DEP_ID'
    end
    object qDataKONK_DEP_NAME: TStringField
      FieldName = 'KONK_DEP_NAME'
      Size = 100
    end
    object qDataNP_DOP_GROUP_ID: TFloatField
      FieldName = 'NP_DOP_GROUP_ID'
    end
    object qDataPRICE: TFloatField
      FieldName = 'PRICE'
    end
    object qDataDENSITY: TFloatField
      FieldName = 'DENSITY'
    end
    object qDataORD: TFloatField
      FieldName = 'ORD'
    end
    object qDataDENSITYNEEDED: TStringField
      FieldName = 'DENSITYNEEDED'
      Size = 1
    end
  end
  object PM1: TPopupMenu
    Left = 456
    Top = 161
    object NCopy: TMenuItem
      Caption = #1057#1082#1086#1087#1080#1088#1086#1074#1072#1090#1100' '#1085#1072' '#1074#1089#1102' '#1082#1086#1083#1086#1085#1082#1091
      object NCopyEmpty: TMenuItem
        Caption = #1058#1086#1083#1100#1082#1086' '#1074' '#1087#1091#1089#1090#1099#1077' '#1082#1083#1077#1090#1082#1080
        OnClick = NCopyEmptyClick
      end
      object NCopyOverWrite: TMenuItem
        Caption = #1055#1086#1074#1077#1088#1093' '#1089#1090#1072#1088#1099#1093' '#1079#1085#1072#1095#1077#1085#1080#1081
        OnClick = NCopyOverWriteClick
      end
    end
    object NGetPrevDay: TMenuItem
      Caption = #1055#1077#1088#1077#1085#1077#1089#1090#1080' '#1089' '#1087#1088#1077#1076#1099#1076#1091#1097#1077#1075#1086' '#1076#1085#1103
      OnClick = NGetPrevDayClick
    end
    object NHideColumn: TMenuItem
      Caption = #1057#1082#1088#1099#1090#1100' '#1082#1086#1083#1086#1085#1082#1091
      OnClick = NHideColumnClick
    end
    object NClearAll: TMenuItem
      Caption = #1054#1095#1080#1089#1090#1080#1090#1100' '#1074#1089#1105
      OnClick = NClearAllClick
    end
    object NHideRow: TMenuItem
      Caption = #1057#1082#1088#1099#1090#1100' '#1086#1088#1075#1072#1085#1080#1079#1072#1094#1080#1102
      OnClick = NHideRowClick
    end
    object NAdd: TMenuItem
      Caption = #1044#1086#1073#1072#1074#1080#1090#1100
      object NAddPodrazd: TMenuItem
        Caption = #1055#1086#1076#1088#1072#1079#1076#1077#1083#1077#1085#1080#1077
        OnClick = NAddPodrazdClick
      end
      object NAddKonkurent: TMenuItem
        Caption = #1050#1086#1085#1082#1091#1088#1077#1085#1090#1072
        OnClick = NAddKonkurentClick
      end
      object NAddKonkCopy: TMenuItem
        Caption = #1050#1086#1087#1080#1102' '#1082#1086#1085#1082#1091#1088#1077#1085#1090#1072
        OnClick = NAddKonkCopyClick
      end
      object NAddAzs: TMenuItem
        Caption = #1040#1047#1057
        OnClick = NAddAzsClick
      end
      object NAddAllAzs: TMenuItem
        Caption = #1042#1089#1077' '#1040#1047#1057
        OnClick = NAddAllAzsClick
      end
      object NAddNp: TMenuItem
        Caption = #1043#1088#1091#1087#1087#1091' '#1053#1055
        OnClick = NAddNpClick
      end
    end
    object miColumns: TMenuItem
      Caption = #1050#1086#1083#1086#1085#1082#1080
      object miColPodr: TMenuItem
        Caption = #1055#1086#1076#1088#1072#1079#1076#1077#1083#1077#1085#1080#1077
        OnClick = miColPodrClick
      end
    end
  end
  object qAddColumn: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,name'
      'from oil_np_dop_group'
      'where super_group_id=1 and state='#39'N'#39)
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 184
    Top = 161
    object qAddColumnID: TFloatField
      FieldName = 'ID'
      Required = True
      Visible = False
    end
    object qAddColumnNAME: TStringField
      FieldName = 'NAME'
      Required = True
      Size = 50
    end
  end
  object qAddKonkurent: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,inst,name'
      'from v_oil_org_norek'
      'where konkurent='#39'Y'#39' and konk_show='#39'N'#39
      'order by name')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 184
    Top = 217
    object qAddKonkurentID: TFloatField
      FieldName = 'ID'
      Required = True
      Visible = False
    end
    object qAddKonkurentINST: TFloatField
      FieldName = 'INST'
      Required = True
      Visible = False
    end
    object qAddKonkurentNAME: TStringField
      FieldName = 'NAME'
      Size = 100
    end
  end
  object qAzs: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,inst,name'
      'from v_oil_org_norek'
      'where par_id=:id and par_inst=:inst and org_id in (8,35)'
      '      and (konk_show='#39'N'#39' or :all_azs='#39'Y'#39')')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 184
    Top = 273
    ParamData = <
      item
        DataType = ftInteger
        Name = 'id'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end
      item
        DataType = ftString
        Name = 'all_azs'
        ParamType = ptInput
        Size = 1
      end>
    object qAzsID: TFloatField
      FieldName = 'ID'
      Required = True
      Visible = False
    end
    object qAzsINST: TFloatField
      FieldName = 'INST'
      Required = True
      Visible = False
    end
    object qAzsNAME: TStringField
      FieldName = 'NAME'
      Size = 100
    end
  end
  object mtd: TMemoryTable
    AfterEdit = mtAfterEdit
    Left = 288
    Top = 81
    object StringField1: TStringField
      FieldName = 'NAME'
      Size = 50
    end
    object mtdDEP_NAME: TStringField
      FieldName = 'DEP_NAME'
      Size = 50
    end
    object FloatField1: TFloatField
      DisplayLabel = '0.000'
      FieldName = '1'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField2: TFloatField
      DisplayLabel = '0.000'
      FieldName = '2'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField3: TFloatField
      DisplayLabel = '0.000'
      FieldName = '3'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField4: TFloatField
      DisplayLabel = '0.000'
      FieldName = '4'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField5: TFloatField
      DisplayLabel = '0.000'
      FieldName = '5'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField6: TFloatField
      DisplayLabel = '0.000'
      FieldName = '6'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField7: TFloatField
      DisplayLabel = '0.000'
      FieldName = '7'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField8: TFloatField
      DisplayLabel = '0.000'
      FieldName = '8'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField9: TFloatField
      DisplayLabel = '0.000'
      FieldName = '9'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField10: TFloatField
      DisplayLabel = '0.000'
      FieldName = '10'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField11: TFloatField
      DisplayLabel = '0.000'
      FieldName = '11'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField12: TFloatField
      DisplayLabel = '0.000'
      FieldName = '12'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField13: TFloatField
      DisplayLabel = '0.000'
      FieldName = '13'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField14: TFloatField
      DisplayLabel = '0.000'
      FieldName = '14'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField15: TFloatField
      DisplayLabel = '0.000'
      FieldName = '15'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField16: TFloatField
      DisplayLabel = '0.000'
      FieldName = '16'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField17: TFloatField
      DisplayLabel = '0.000'
      FieldName = '17'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField18: TFloatField
      DisplayLabel = '0.000'
      FieldName = '18'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField19: TFloatField
      DisplayLabel = '0.000'
      FieldName = '19'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object FloatField20: TFloatField
      DisplayLabel = '0.000'
      FieldName = '20'
      DisplayFormat = '0.000'
      EditFormat = '0.000'
      Precision = 2
    end
    object mtdOrg_Id: TFloatField
      FieldName = 'ORG_ID'
    end
    object mtdOrg_Inst: TFloatField
      FieldName = 'ORG_INST'
    end
    object StringField2: TStringField
      FieldName = 'TYPE'
      Size = 1
    end
    object mtdInst: TFloatField
      FieldName = 'INST'
    end
    object StringField3: TStringField
      FieldName = 'INST_NAME'
      Size = 50
    end
  end
  object qAddPodr: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select id,name'
      'from v_org'
      'where id=inst and par=par_inst and state='#39'Y'#39
      '      and org_type in (3,4) '
      '      and :oblid=par'
      'order by name')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 112
    Top = 161
    ParamData = <
      item
        DataType = ftInteger
        Name = 'oblid'
        ParamType = ptInput
      end>
    object qAddPodrID: TFloatField
      FieldName = 'ID'
      Required = True
      Visible = False
    end
    object qAddPodrNAME: TStringField
      FieldName = 'NAME'
      Size = 100
    end
  end
  object qPar: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'select par,par_inst'
      'from v_org'
      'where id=:id and inst=:inst')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 112
    Top = 217
    ParamData = <
      item
        DataType = ftInteger
        Name = 'id'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end>
    object qParPAR: TFloatField
      FieldName = 'PAR'
    end
    object qParPAR_INST: TFloatField
      FieldName = 'PAR_INST'
    end
  end
  object qDelLinks: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'update oil_org_link'
      'set state='#39'N'#39
      'where (id,inst) in '
      '  (select /*+ORDERED USE_HASH(oo,ool)*/'
      '     ool.id,ool.inst'
      '   from v_org oo,oil_org_link ool'
      '   where oo.state='#39'Y'#39' and ool.state='#39'Y'#39
      '         and ool.from_id=oo.id and ool.from_inst=oo.inst'
      
        '         and (:id,:inst) in ((oo.id,oo.inst),(oo.par,oo.par_inst' +
        '))'
      '         and ool.to_id=ool.to_inst '
      '         and (ool.to_id=:dep or ool.to_id is null)'
      '  )')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 112
    Top = 273
    ParamData = <
      item
        DataType = ftInteger
        Name = 'id'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'inst'
        ParamType = ptInput
      end
      item
        DataType = ftInteger
        Name = 'dep'
        ParamType = ptInput
      end>
  end
  object qDelDouble: TOilQuery
    Session = frmStart.OraSession1
    SQL.Strings = (
      'update oil_konk_price'
      'set state='#39'N'#39
      'where (id,inst) in '
      '   (select id,inst'
      '    from'
      '      (select kp.*,Q.id as q_id'
      '       from oil_konk_price kp,'
      
        '            (select inst,date_,org_id,org_inst,np_dop_group_id,d' +
        'ep_id,max(id) as id'
      '             from oil_konk_price'
      '             where state='#39'Y'#39
      
        '             group by inst,date_,org_id,org_inst,np_dop_group_id' +
        ',dep_id'
      '            ) Q'
      
        '       where kp.id=Q.id(+) and kp.inst=Q.inst(+) and kp.state='#39'Y' +
        #39
      '      )'
      '    where q_id is null'
      '   )')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 264
    Top = 161
  end
end
