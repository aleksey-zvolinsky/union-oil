inherited ServiceForm: TServiceForm
  Left = 319
  Top = 137
  BorderIcons = []
  BorderStyle = bsDialog
  Caption = #1059#1089#1083#1091#1075#1080
  ClientHeight = 502
  ClientWidth = 432
  OldCreateOrder = True
  Position = poScreenCenter
  OnCreate = FormCreate
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 8
    Top = 8
    Width = 40
    Height = 13
    Caption = #1053#1086#1084#1077#1088' :'
  end
  object Label2: TLabel
    Left = 144
    Top = 8
    Width = 32
    Height = 13
    Caption = #1044#1072#1090#1072' :'
  end
  object Label14: TLabel
    Left = 8
    Top = 429
    Width = 68
    Height = 13
    Caption = #1050#1086#1084#1077#1085#1090#1072#1088#1080#1081' :'
  end
  object Label12: TLabel
    Left = 8
    Top = 28
    Width = 86
    Height = 13
    Caption = #1055#1086#1076#1088#1072#1079#1076#1077#1083#1077#1085#1080#1077' :'
  end
  object Label11: TLabel
    Left = 256
    Top = 350
    Width = 43
    Height = 13
    Caption = #1055#1072#1088#1090#1080#1103' :'
  end
  object SpeedButton4: TSpeedButton
    Left = 402
    Top = 366
    Width = 23
    Height = 22
    Flat = True
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      0400000000000001000000000000000000001000000010000000000000000000
      80000080000000808000800000008000800080800000C0C0C000808080000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00DDDDDDDDDDDD
      DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD88DDDDDDDD
      88DDDDFFDDDDDDDDFFDDDD888DDDDDD888DDDDFFFDDDDDDFFFDDDDD888DDDD88
      8DDDDDDFFFDDDDFFFDDDDDDD888DD888DDDDDDDDFFFDDFFFDDDDDDDDD888888D
      DDDDDDDDDFFFFFFDDDDDDDDDDD8888DDDDDDDDDDDDFFFFDDDDDDDDDDDD8888DD
      DDDDDDDDDDFFFFDDDDDDDDDDD888888DDDDDDDDDDFFFFFFDDDDDDDDD888DD888
      DDDDDDDDFFFDDFFFDDDDDDD888DDDD888DDDDDDFFFDDDDFFFDDDDD888DDDDDD8
      88DDDDFFFDDDDDDFFFDDDD88DDDDDDDD88DDDDFFDDDDDDDDFFDDDDDDDDDDDDDD
      DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD}
    NumGlyphs = 2
    OnClick = SpeedButton4Click
  end
  object Label10: TLabel
    Left = 8
    Top = 350
    Width = 60
    Height = 13
    Caption = #1043#1088#1091#1087#1087#1072' '#1053#1055' :'
  end
  object SpeedButton3: TSpeedButton
    Left = 228
    Top = 366
    Width = 23
    Height = 22
    Flat = True
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      0400000000000001000000000000000000001000000010000000000000000000
      80000080000000808000800000008000800080800000C0C0C000808080000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00DDDDDDDDDDDD
      DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD88DDDDDDDD
      88DDDDFFDDDDDDDDFFDDDD888DDDDDD888DDDDFFFDDDDDDFFFDDDDD888DDDD88
      8DDDDDDFFFDDDDFFFDDDDDDD888DD888DDDDDDDDFFFDDFFFDDDDDDDDD888888D
      DDDDDDDDDFFFFFFDDDDDDDDDDD8888DDDDDDDDDDDDFFFFDDDDDDDDDDDD8888DD
      DDDDDDDDDDFFFFDDDDDDDDDDD888888DDDDDDDDDDFFFFFFDDDDDDDDD888DD888
      DDDDDDDDFFFDDFFFDDDDDDD888DDDD888DDDDDDFFFDDDDFFFDDDDD888DDDDDD8
      88DDDDFFFDDDDDDFFFDDDD88DDDDDDDD88DDDDFFDDDDDDDDFFDDDDDDDDDDDDDD
      DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD}
    NumGlyphs = 2
    OnClick = SpeedButton3Click
  end
  object Panel1: TPanel
    Left = 0
    Top = 470
    Width = 432
    Height = 32
    Align = alBottom
    BevelInner = bvRaised
    BevelOuter = bvLowered
    TabOrder = 9
    object bbOk: TBitBtn
      Left = 248
      Top = 4
      Width = 88
      Height = 25
      Caption = '&'#1055#1088#1080#1085#1103#1090#1100
      TabOrder = 0
      OnClick = bbOkClick
      Glyph.Data = {
        DE010000424DDE01000000000000760000002800000024000000120000000100
        0400000000006801000000000000000000001000000010000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
        3333333333333333333333330000333333333333333333333333F33333333333
        00003333344333333333333333388F3333333333000033334224333333333333
        338338F3333333330000333422224333333333333833338F3333333300003342
        222224333333333383333338F3333333000034222A22224333333338F338F333
        8F33333300003222A3A2224333333338F3838F338F33333300003A2A333A2224
        33333338F83338F338F33333000033A33333A222433333338333338F338F3333
        0000333333333A222433333333333338F338F33300003333333333A222433333
        333333338F338F33000033333333333A222433333333333338F338F300003333
        33333333A222433333333333338F338F00003333333333333A22433333333333
        3338F38F000033333333333333A223333333333333338F830000333333333333
        333A333333333333333338330000333333333333333333333333333333333333
        0000}
      NumGlyphs = 2
    end
    object BitBtn2: TBitBtn
      Left = 339
      Top = 4
      Width = 88
      Height = 25
      Caption = '&'#1054#1090#1084#1077#1085#1080#1090#1100
      TabOrder = 1
      Kind = bkCancel
    end
  end
  object eServiceNum: TEdit
    Left = 56
    Top = 4
    Width = 72
    Height = 21
    MaxLength = 10
    TabOrder = 0
    OnKeyPress = eServiceNumKeyPress
  end
  object deDate: TDateEdit
    Left = 184
    Top = 4
    Width = 97
    Height = 21
    DefaultToday = True
    DirectInput = False
    NumGlyphs = 2
    YearDigits = dyFour
    TabOrder = 1
    Text = '29.03.2005'
    OnChange = deDateChange
  end
  object Panel3: TPanel
    Left = 8
    Top = 158
    Width = 417
    Height = 49
    BevelInner = bvRaised
    BevelOuter = bvLowered
    TabOrder = 4
    object Label7: TLabel
      Left = 17
      Top = 5
      Width = 82
      Height = 13
      Caption = #1057#1091#1084#1084#1072' '#1073#1077#1079' '#1053#1044#1057
    end
    object Label8: TLabel
      Left = 153
      Top = 5
      Width = 24
      Height = 13
      Caption = #1053#1044#1057
    end
    object Label9: TLabel
      Left = 286
      Top = 5
      Width = 70
      Height = 13
      Caption = #1057#1091#1084#1084#1072' '#1089' '#1053#1044#1057
    end
    object CEBase: TCurrencyEdit
      Left = 16
      Top = 21
      Width = 113
      Height = 21
      AutoSize = False
      TabOrder = 0
      OnChange = CEBaseChange
    end
    object ceNDS: TCurrencyEdit
      Left = 152
      Top = 21
      Width = 111
      Height = 21
      TabStop = False
      AutoSize = False
      TabOrder = 1
      OnChange = ceNDSChange
    end
    object ceSumsNDS: TCurrencyEdit
      Left = 286
      Top = 21
      Width = 113
      Height = 21
      TabStop = False
      AutoSize = False
      TabOrder = 2
      OnChange = ceSumsNDSChange
    end
  end
  object Edit3: TEdit
    Left = 8
    Top = 444
    Width = 417
    Height = 21
    MaxLength = 100
    TabOrder = 8
  end
  object RadioGroup1: TRadioGroup
    Left = 8
    Top = 392
    Width = 417
    Height = 34
    Caption = ' '#1042#1080#1076' '#1086#1087#1083#1072#1090#1099' '
    Columns = 3
    ItemIndex = 2
    Items.Strings = (
      #1050#1086#1084#1084#1080#1089#1089#1080#1086#1085#1085#1072#1103
      #1057#1086#1073#1089#1090#1074#1077#1085#1085#1072#1103
      #1055#1088#1086#1095#1072#1103)
    TabOrder = 7
  end
  object ComboEdit5: TComboEdit
    Left = 8
    Top = 44
    Width = 417
    Height = 21
    DirectInput = False
    Enabled = False
    GlyphKind = gkDropDown
    NumGlyphs = 1
    TabOrder = 2
    OnButtonClick = ComboEdit5ButtonClick
    OnDblClick = ComboEdit5ButtonClick
  end
  object gbClient: TGroupBox
    Left = 8
    Top = 68
    Width = 417
    Height = 85
    Caption = ' '#1054#1088#1075#1072#1085#1080#1079#1072#1094#1080#1103' '
    TabOrder = 3
    object lBank: TLabel
      Left = 24
      Top = 40
      Width = 31
      Height = 13
      Caption = #1041#1072#1085#1082' :'
    end
    object lFacture: TLabel
      Left = 245
      Top = 40
      Width = 25
      Height = 13
      Caption = #1056'/'#1057' :'
    end
    object ComboEdit1: TComboEdit
      Left = 8
      Top = 16
      Width = 401
      Height = 21
      DirectInput = False
      GlyphKind = gkDropDown
      NumGlyphs = 1
      TabOrder = 0
      OnButtonClick = ComboEdit1ButtonClick
      OnChange = ComboEdit1Change
      OnDblClick = ComboEdit1ButtonClick
    end
    object dbgRekvizit: TDBGridEh
      Left = 8
      Top = 56
      Width = 401
      Height = 21
      Hint = #1056#1077#1082#1074#1080#1079#1080#1090#1099' '#1082#1083#1080#1077#1085#1090#1072
      TabStop = False
      DataSource = dsRekvizit
      FooterColor = clWindow
      FooterFont.Charset = DEFAULT_CHARSET
      FooterFont.Color = clWindowText
      FooterFont.Height = -11
      FooterFont.Name = 'MS Sans Serif'
      FooterFont.Style = []
      Options = [dgIndicator, dgColLines, dgRowLines, dgTabs, dgRowSelect, dgConfirmDelete, dgCancelOnExit]
      TabOrder = 1
      TitleFont.Charset = DEFAULT_CHARSET
      TitleFont.Color = clWindowText
      TitleFont.Height = -11
      TitleFont.Name = 'MS Sans Serif'
      TitleFont.Style = []
      OnDblClick = dbgRekvizitDblClick
      OnExit = dbgRekvizitExit
      Columns = <
        item
          EditButtons = <>
          FieldName = 'NAME'
          Footers = <>
          Width = 208
        end
        item
          EditButtons = <>
          FieldName = 'RACH_CHET'
          Footers = <>
          Width = 136
        end>
    end
  end
  object ComboEdit4: TComboEdit
    Left = 256
    Top = 366
    Width = 145
    Height = 21
    DirectInput = False
    GlyphKind = gkDropDown
    NumGlyphs = 1
    TabOrder = 6
    OnButtonClick = ComboEdit4ButtonClick
    OnDblClick = ComboEdit4ButtonClick
  end
  object ComboEdit3: TComboEdit
    Left = 8
    Top = 366
    Width = 217
    Height = 21
    DirectInput = False
    GlyphKind = gkDropDown
    NumGlyphs = 1
    TabOrder = 5
    OnButtonClick = ComboEdit3ButtonClick
    OnDblClick = ComboEdit3ButtonClick
  end
  object gbTax: TGroupBox
    Left = 280
    Top = 207
    Width = 145
    Height = 142
    Caption = #1053#1072#1083#1086#1075#1086#1074#1072#1103' '#1085#1072#1082#1083#1072#1076#1085#1072#1103
    TabOrder = 10
    object Label6: TLabel
      Left = 6
      Top = 19
      Width = 40
      Height = 13
      Caption = #1053#1086#1084#1077#1088' :'
    end
    object Label5: TLabel
      Left = 62
      Top = 19
      Width = 40
      Height = 13
      Caption = #1057#1091#1084#1084#1072' :'
    end
    object lOperation: TLabel
      Left = 6
      Top = 72
      Width = 86
      Height = 13
      Caption = #1060#1086#1088#1084#1072' '#1088#1072#1089#1095#1077#1090#1072' :'
    end
    object eNumNN: TEdit
      Left = 6
      Top = 40
      Width = 55
      Height = 21
      TabStop = False
      BorderStyle = bsNone
      Color = clBtnFace
      ReadOnly = True
      TabOrder = 0
    end
    object cbTax: TCheckBox
      Left = 6
      Top = 116
      Width = 133
      Height = 17
      Caption = #1053#1077' '#1089#1086#1079#1076#1072#1074#1072#1090#1100' '#1053#1053
      TabOrder = 1
    end
    object ceNNSum: TCurrencyEdit
      Left = 62
      Top = 40
      Width = 80
      Height = 21
      Alignment = taLeftJustify
      AutoSize = False
      BorderStyle = bsNone
      Color = clBtnFace
      DisplayFormat = '0.00'#1075#1088#1085#39'.'#39';-0.00'#1075#1088#1085#39'.'#39
      ReadOnly = True
      TabOrder = 2
    end
    object cbFormRash: TComboBox
      Left = 6
      Top = 88
      Width = 133
      Height = 21
      ItemHeight = 13
      TabOrder = 3
      Text = #1054#1087#1083#1072#1090#1072' '#1089' '#1088'/'#1089
      Items.Strings = (
        #1054#1087#1083#1072#1090#1072' '#1089' '#1088'/'#1089
        #1053#1072#1083#1080#1095#1085#1099#1077
        #1041#1072#1085#1082#1086#1074#1089#1082#1080#1081' '#1095#1077#1082
        #1042#1079#1072#1080#1084#1086#1079#1072#1095#1077#1090
        #1041#1072#1088#1090#1077#1088
        '')
    end
  end
  object gbDog: TGroupBox
    Left = 8
    Top = 207
    Width = 265
    Height = 142
    Caption = #1044#1086#1075#1086#1074#1086#1088
    TabOrder = 11
    object SpeedButton1: TSpeedButton
      Left = 121
      Top = 30
      Width = 23
      Height = 22
      Flat = True
      Glyph.Data = {
        76010000424D7601000000000000760000002800000020000000100000000100
        0400000000000001000000000000000000001000000010000000000000000000
        80000080000000808000800000008000800080800000C0C0C000808080000000
        FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00DDDDDDDDDDDD
        DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD88DDDDDDDD
        88DDDDFFDDDDDDDDFFDDDD888DDDDDD888DDDDFFFDDDDDDFFFDDDDD888DDDD88
        8DDDDDDFFFDDDDFFFDDDDDDD888DD888DDDDDDDDFFFDDFFFDDDDDDDDD888888D
        DDDDDDDDDFFFFFFDDDDDDDDDDD8888DDDDDDDDDDDDFFFFDDDDDDDDDDDD8888DD
        DDDDDDDDDDFFFFDDDDDDDDDDD888888DDDDDDDDDDFFFFFFDDDDDDDDD888DD888
        DDDDDDDDFFFDDFFFDDDDDDD888DDDD888DDDDDDFFFDDDDFFFDDDDD888DDDDDD8
        88DDDDFFFDDDDDDFFFDDDD88DDDDDDDD88DDDDFFDDDDDDDDFFDDDDDDDDDDDDDD
        DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD}
      NumGlyphs = 2
      OnClick = SpeedButton1Click
    end
    object Label3: TLabel
      Left = 157
      Top = 16
      Width = 32
      Height = 13
      Caption = #1044#1072#1090#1072' :'
    end
    object Label17: TLabel
      Left = 8
      Top = 16
      Width = 40
      Height = 13
      Caption = #1053#1086#1084#1077#1088' :'
    end
    object Label13: TLabel
      Left = 8
      Top = 61
      Width = 56
      Height = 13
      Caption = #1054#1087#1077#1088#1072#1094#1080#1103' :'
    end
    object ceDog: TComboEdit
      Left = 8
      Top = 31
      Width = 113
      Height = 21
      DirectInput = False
      GlyphKind = gkDropDown
      NumGlyphs = 1
      TabOrder = 0
      OnButtonClick = ceDogButtonClick
      OnDblClick = ceDogButtonClick
    end
    object DateEdit2: TDateEdit
      Left = 157
      Top = 32
      Width = 101
      Height = 20
      Enabled = False
      NumGlyphs = 2
      TabOrder = 1
    end
    object GroupBox1: TGroupBox
      Left = 2
      Top = 82
      Width = 261
      Height = 58
      Align = alBottom
      Caption = #1057#1091#1084#1084#1099' '#1089' '#1053#1044#1057' :'
      TabOrder = 2
      object Label4: TLabel
        Left = 166
        Top = 15
        Width = 88
        Height = 13
        Caption = #1053#1053' '#1087#1086' '#1086#1087#1077#1088#1072#1094#1080#1080' :'
      end
      object Label16: TLabel
        Left = 85
        Top = 15
        Width = 54
        Height = 13
        Caption = #1086#1087#1077#1088#1072#1094#1080#1103' :'
      end
      object Label15: TLabel
        Left = 6
        Top = 15
        Width = 47
        Height = 13
        Caption = #1076#1086#1075#1086#1074#1086#1088' :'
      end
      object ceSumOper: TCurrencyEdit
        Left = 85
        Top = 35
        Width = 75
        Height = 21
        Alignment = taLeftJustify
        AutoSize = False
        BorderStyle = bsNone
        Color = clBtnFace
        DisplayFormat = '0.00'#1075#1088#1085#39'.'#39';-0.00'#1075#1088#1085#39'.'#39
        ReadOnly = True
        TabOrder = 0
      end
      object ceSumDog: TCurrencyEdit
        Left = 6
        Top = 35
        Width = 75
        Height = 21
        Alignment = taLeftJustify
        AutoSize = False
        BorderStyle = bsNone
        Color = clBtnFace
        DisplayFormat = '0.00'#1075#1088#1085#39'.'#39';-0.00'#1075#1088#1085#39'.'#39
        ReadOnly = True
        TabOrder = 1
      end
      object CESumNN: TCurrencyEdit
        Left = 166
        Top = 35
        Width = 90
        Height = 21
        Alignment = taLeftJustify
        AutoSize = False
        BorderStyle = bsNone
        Color = clBtnFace
        DisplayFormat = '0.00'#1075#1088#1085#39'.'#39';-0.00'#1075#1088#1085#39'.'#39
        ReadOnly = True
        TabOrder = 2
      end
    end
    object ceOperation: TComboEdit
      Left = 71
      Top = 57
      Width = 187
      Height = 21
      DirectInput = False
      GlyphKind = gkDropDown
      NumGlyphs = 1
      TabOrder = 3
      OnButtonClick = ceOperationButtonClick
      OnDblClick = ceOperationButtonClick
    end
  end
  object q1: TOilQuery
        RequestLive = False
    UpdateMode = upWhereAll
    Left = 368
    Top = 3
  end
  object sp1: TOilStoredProc
        Left = 400
    Top = 3
  end
  object dsRekvizit: TOraDataSource
    DataSet = qRekvizit
    Left = 327
    Top = 3
  end
  object qRekvizit: TOilQuery
    SQL.Strings = (
      'SELECT *'
      'FROM v_oil_rekvizit'
      'WHERE id_org = :p_OrgId'
      '  AND inst = :p_OrgInst'
      'ORDER BY def DESC  ')
        RequestLive = False
    UpdateMode = upWhereAll
    Left = 320
    Top = 16
    ParamData = <
      item
        DataType = ftInteger
        Name = 'p_OrgId'
      end
      item
        DataType = ftInteger
        Name = 'p_OrgInst'
      end>
  end
  object qDog_Det: TOilQuery
    SQL.Strings = (
      'select dd.np_type, dd.price, dd.dim_id, dd.count_, dd.price2'
      'from'
      '  oil_dog d,'
      '  oil_dog_detail dd'
      'where'
      '  d.id = :dog_id and'
      '  d.inst = :dog_inst and'
      '  dd.dog_id = d.id and'
      '  dd.dog_inst = d.inst and'
      '  ((dd.np_type = :oper_id) or (:oper_id = -1)) and'
      '  dd.id = dd.id and'
      '  d.state = '#39'Y'#39' and'
      '  dd.state = '#39'Y'#39)
        RequestLive = False
    UpdateMode = upWhereAll
    Left = 208
    Top = 304
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'oper_id'
      end
      item
        DataType = ftUnknown
        Name = 'oper_id'
      end>
  end
  object qDog_Sum: TOilQuery
    SQL.Strings = (
      '/* '#1076#1086#1089#1090#1072#1077#1084' '#1089#1091#1084#1084#1091' '#1087#1086' '#1076#1086#1075#1086#1074#1086#1088#1091', '#1089#1091#1084#1084#1091' '#1087#1086' '#1086#1087#1077#1088#1072#1094#1080#1080' '#1076#1086#1075#1086#1074#1086#1088#1072', '
      '   '#1089#1091#1084#1084#1091' '#1090#1077#1082#1091#1097#1077#1081' '#1053#1053'  */'
      'select max(oper_id) oper_id,'
      '       max(summ_dog_oper) summ_dog_oper,'
      '       max(summ_dog_all) summ_dog_all,'
      '       max(summ_NN_cur) summ_NN_cur'
      '  from (select dog.np_type oper_id,'
      '               dog.summ summ_dog_oper,'
      '               dog_all.sum_all summ_dog_all,'
      '               to_number(null) summ_NN_cur'
      
        '          from (select nvl(round(nds.GetWithNDS_noNDS(dd.price *' +
        ' dd.count_, d.dog_date),2),0) summ,'
      '                       dd.np_type np_type,'
      '                       dd.dog_id dog_id,'
      '                       dd.dog_inst dog_inst'
      '                  from oil_dog_detail dd,'
      '                       oil_dog        d'
      '                 where dd.state(+) = '#39'Y'#39
      '                   and d.state = '#39'Y'#39
      '                   and d.id = dd.dog_id(+)'
      '                   and d.inst = dd.dog_inst(+)'
      '                   and d.dog_type = '#39'S'#39') dog,'
      
        '               (select nvl(sum(round(nds.GetWithNDS_noNDS(dd.pri' +
        'ce * dd.count_, d.dog_date),2)),0) sum_all,'
      '                       dd.dog_id dog_id,'
      '                       dd.dog_inst dog_inst'
      '                  from oil_dog_detail dd,'
      '                       oil_dog        d'
      '                 where dd.state = '#39'Y'#39
      '                   and d.state(+) = '#39'Y'#39
      '                   and d.dog_type = '#39'S'#39
      '                   and d.id = dd.dog_id(+)'
      '                   and d.inst = dd.dog_inst(+)'
      '                 group by dd.dog_id,'
      '                          dd.dog_inst) dog_all'
      '         where (dog.np_type = :oper_id or :oper_id = -1)'
      '           and dog_all.dog_id(+) = :dog_id'
      '           and dog_all.dog_inst(+) = :dog_inst'
      '           and dog.dog_id(+) = :dog_id'
      '           and dog.dog_inst(+) = :dog_inst'
      '        union ALL'
      '        select to_number(null) oper_id,'
      '               to_number(null) summ_dog_oper,'
      '               to_number(null) summ_dog_all,'
      '               sb.nds_t summ_NN_cur'
      '          from V_OIL_SALE_BOOK sb'
      '         where sb.id = :nn_id'
      '           and sb.inst = :nn_inst)')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 152
    Top = 304
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'oper_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'nn_id'
      end
      item
        DataType = ftUnknown
        Name = 'nn_inst'
      end>
  end
  object qSumNN: TOilQuery
    SQL.Strings = (
      '/* '#1076#1086#1089#1090#1072#1077#1084' '#1089#1091#1084#1084#1091' '#1087#1086' '#1053#1053' '#1089' '#1076#1072#1085#1085#1086#1081' '#1086#1087#1077#1088#1072#1094#1080#1077#1081'*/'
      'select '
      '  sum(sum_nn) sum_nn,'
      '  max(s_date) s_date,'
      '  tov_id'
      'from '
      '  ('
      '   select '
      '     nvl(sbd.nds_t, 0) sum_nn,'
      '     sbd.tov_id tov_id,'
      '     sbd.kol count_,'
      '     trunc(sb.s_date) s_date,'
      '     s.dog_id dog_id,'
      '     s.dog_inst dog_inst            '
      '   from      '
      '     Oil_Sale_Book sb,'
      '     Oil_sale_book_det sbd,'
      '     oil_dog d,'
      '     oil_service s'
      '   where      '
      '     sb.id = sbd.nn_id'
      '     and sb.inst = sbd.nn_inst'
      '     and sb.state = '#39'Y'#39
      '     and sbd.state = '#39'Y'#39
      '     and d.id = :dog_id'
      '     and d.inst = :dog_inst'
      '     and sb.id = s.nn_id'
      '     and sb.inst = s.nn_inst '
      '     and d.id = s.dog_id'
      '     and d.inst = s.dog_inst'
      '     and nvl(sbd.tov_id, sb.tov_id) = :np_id'
      ''
      '   Union all'
      '   select '
      '     nvl(sbd.nds_t, 0) sum_nan,'
      '     sbd.tov_id tov_id,'
      '     sbd.kol count_,'
      '     trunc(sb.s_date) s_date,'
      '     m.dog_id dog_id,'
      '     m.dog_inst dog_inst  '
      '   from      '
      '     Oil_Sale_Book sb,'
      '     Oil_sale_book_det sbd,'
      '     oil_dog d,'
      '     oil_money m'
      '   where '
      '     sb.id = sbd.nn_id'
      '     and sb.inst = sbd.nn_inst'
      '     and sb.state = '#39'Y'#39
      '     and sbd.state = '#39'Y'#39
      '     and d.id = :dog_id'
      '     and d.inst = :dog_inst'
      '     and sb.id = m.nn_id'
      '     and sb.inst = m.nn_inst '
      '     and d.id = m.dog_id'
      '     and d.inst = m.dog_inst'
      '     and nvl(sbd.tov_id, sb.tov_id) = :np_id'
      '  )'
      'where '
      '  (tov_id = :np_id or :np_id = -1)'
      '  and tov_id is not null and tov_id <> 0 '
      'group by tov_id')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 376
    Top = 128
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'np_id'
      end>
  end
  object qSumNNwS: TOilQuery
    SQL.Strings = (
      'select'
      '  sum(sum_nn) sum_nn,'
      '  max(s_date) s_date'
      'from '
      '  ('
      '   select '
      '     nvl(sum(sbd.nds_t),0) sum_nn,'
      '     sbd.tov_id,'
      '     sbd.kol count_,'
      '     sbd.nds_t,'
      '     MAX(sb.s_date) s_date'
      '   from'
      '     Oil_Sale_Book sb,'
      '     Oil_sale_book_det sbd,'
      '     oil_dog d,'
      '     oil_service m'
      '   where'
      '     sb.id = sbd.nn_id'
      '     and sb.inst = sbd.nn_inst'
      '     and sb.state = '#39'Y'#39
      '     and sbd.state = '#39'Y'#39
      '     and d.id = :dog_id'
      '     and d.inst = :dog_inst'
      '     and sb.id = m.nn_id'
      '     and sb.inst = m.nn_inst'
      '     and d.id = m.dog_id'
      '     and d.inst = m.dog_inst'
      '     and nvl(sbd.tov_id, sb.tov_id) = :np_id'
      '     and ((not (sb.id = :nn_id and sb.inst = :nn_inst)) or'
      '       (:nn_id = -1 and :nn_inst = -1))'
      '   group by '
      '     sbd.id,'
      '     sbd.tov_id,'
      '     sbd.kol,'
      '     sbd.nds_t'
      '  )')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 312
    Top = 176
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'np_id'
      end
      item
        DataType = ftUnknown
        Name = 'nn_id'
      end
      item
        DataType = ftUnknown
        Name = 'nn_inst'
      end>
  end
  object qSumNNwM: TOilQuery
    SQL.Strings = (
      'select'
      '  sum(sum_nn) sum_nn,'
      '  max(s_date) s_date'
      'from '
      '  ('
      '   select '
      '     nvl(sum(sbd.nds_t),0) sum_nn,'
      '     sbd.tov_id,'
      '     sbd.kol count_,'
      '     sbd.nds_t,'
      '     MAX(sb.s_date) s_date'
      '   from'
      '     Oil_Sale_Book sb,'
      '     Oil_sale_book_det sbd,'
      '     oil_dog d,'
      '     oil_money m'
      '   where'
      '     sb.id = sbd.nn_id'
      '     and sb.inst = sbd.nn_inst'
      '     and sb.state = '#39'Y'#39
      '     and sbd.state = '#39'Y'#39
      '     and d.id = :dog_id'
      '     and d.inst = :dog_inst'
      '     and sb.id = m.nn_id'
      '     and sb.inst = m.nn_inst '
      '     and d.id = m.dog_id'
      '     and d.inst = m.dog_inst'
      '     and nvl(sbd.tov_id, sb.tov_id) = :np_id'
      '   group by '
      '     sbd.id,'
      '     sbd.tov_id,'
      '     sbd.kol,'
      '     sbd.nds_t'
      '  )')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 312
    Top = 128
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'np_id'
      end>
  end
  object qOutwS: TOilQuery
    SQL.Strings = (
      'select'
      '  nvl(sum(m.total),0) sum_total_s'
      'from'
      '  oil_dog_detail ddet,'
      '  oil_dog d,'
      '  oil_service m'
      'where'
      '  d.id = ddet.dog_id'
      '  and d.inst = ddet.dog_inst'
      '  and d.state = '#39'Y'#39
      '  and ddet.state = '#39'Y'#39
      '  and m.state = '#39'Y'#39
      '  and d.id = :dog_id'
      '  and d.inst = :dog_inst'
      '  and d.id = m.dog_id'
      '  and d.inst = m.dog_inst'
      '  and ((m.oper_id = :np_id) or (:np_id = -1))'
      '  and ddet.np_type = m.oper_id'
      '  and ((not (m.id = :id and m.inst = :inst)) '
      '    or (:id = -1 and :inst = -1))')
    RequestLive = False
    UpdateMode = upWhereAll
    Left = 376
    Top = 176
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'dog_id'
      end
      item
        DataType = ftUnknown
        Name = 'dog_inst'
      end
      item
        DataType = ftUnknown
        Name = 'np_id'
      end
      item
        DataType = ftUnknown
        Name = 'id'
      end
      item
        DataType = ftUnknown
        Name = 'inst'
      end>
  end
end
